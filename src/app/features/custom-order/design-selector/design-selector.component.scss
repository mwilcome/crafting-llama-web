@use 'index' as *;
@use 'theme' as *;

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ Wrapper â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.design-selector {
  padding: $space-lg;
  max-width: $max-width;
  margin: 0 auto;

  /* ---------- Headline ---------- */
  .page-title {
    font-size: $font-xl;
    font-weight: $weight-bold;
    margin-bottom: $space-sm;
    text-align: center;
    font-family: $font-heading;
  }

  /* ---------- Pricing blurb ---------- */
  .pricing-disclaimer {
    @include flex(column, center, center);
    font-size: $font-sm;
    color: $color-muted;
    margin: 0 auto $space-lg;
    max-width: 80%;
    background: $color-accent-light;
    padding: $space-xs $space-sm;
    border-radius: $radius-sm;
    border: 1px solid $color-accent-hover;

    p { margin: 0 0 $space-xs; }
    a { color: $color-llama; text-decoration: underline; &:hover { color: $color-accent-hover; } }

    .tooltip-container {
      position: relative;
      display: inline-block;
      margin-left: $space-xs;
      cursor: help;

      .info-icon    { width: 1rem; height: 1rem; color: $color-muted; }
      .tooltip-text { @include tooltip(200px); }

      &:hover .tooltip-text,
      &:focus-within .tooltip-text { visibility: visible; opacity: 1; }
    }
  }

  /* ---------- Search ---------- */
  .search-wrapper {
    /* NEW: flex layout keeps icon & Ã— perfectly aligned */
    display: flex;
    align-items: center;
    gap: $space-xs;
    margin-bottom: $space-md;
    position: relative;

    /* give a tiny inset so outline never clips the view-port */
    margin-inline: $space-xs;

    /* icon (order 1) */
    .search-icon {
      width: 1rem; height: 1rem; fill: $color-muted;
      flex: 0 0 auto;
      pointer-events: none;
    }

    /* input (order 2) */
    input {
      flex: 1 1 auto;
      padding: $space-sm $space-sm $space-sm $space-xs;
      border: 1px solid $color-gray-300;
      border-radius: $radius-md;
      font-size: $font-base;
      font-family: inherit;
      box-shadow: $shadow-sm;
      box-sizing: border-box;
    }

    /* clear button (order 3) */
    .clear-btn {
      background: none;
      border: none;
      font-size: $font-lg;
      color: $color-muted;
      cursor: pointer;
      flex: 0 0 auto;
    }
  }

  /* ---------- Tag chips ---------- */
  .tag-filters {
    display: flex;
    flex-wrap: wrap;
    gap: $space-sm;
    justify-content: center;
    margin-bottom: $space-lg;

    .chip {
      padding: $space-xs $space-sm;
      font-size: $font-sm;
      border-radius: $radius-full;
      border: 1px solid $color-llama;
      background: transparent;
      color: $color-llama;
      cursor: pointer;
      transition: all $animation-duration ease;

      &.active { background: $color-llama; color: $color-light; }
      &:hover  { background: $color-accent-hover; color: $color-light; }
    }
  }

  /* ---------- Grid ---------- */
  .design-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: $space-lg;
    align-items: start;
    max-width: 100%;

    > * {
      max-width: 320px;
      width: 100%;
      margin: 0 auto;
    }
  }

  .loading,
  .no-results {
    text-align: center;
    font-size: $font-base;
    font-family: $font-body;
    color: $color-muted;
    margin-top: $space-xl;
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€ ðŸ“± Mobile (â‰¤ 768 px) â”€â”€â”€â”€â”€â”€â”€â”€ */
  @media (max-width: 768px) {
    padding: $space-sm;

    /* Hide non-essential blocks */
    .page-title,
    .pricing-disclaimer { display: none; }

    /* search tweaks: font a bit smaller */
    .search-wrapper input { font-size: $font-sm; }

    /* tag chip tweaks */
    .tag-filters {
      gap: $space-xs;
      overflow-x: auto;
      padding-bottom: $space-xxs;
      margin-bottom: $space-md;

      .chip {
        white-space: nowrap;
        font-size: $font-xs;
        padding: $space-xxs $space-xs;
      }
    }

    /* grid tweaks */
    .design-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: $space-sm;

      > * {
        border-radius: $radius-sm;
        box-shadow: $shadow-sm;
        background: $color-surface;
        overflow: hidden;
      }
    }

    /* clamp long blurbs */
    app-design-card .description,
    .design-description {
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
      font-size: $font-xs;
      line-height: 1.3;
      margin: 0;
    }

    /*  ðŸ†• Price wrapper fixes  */
    .price-wrapper {
      display: flex;
      align-items: flex-start;
      flex-wrap: wrap;       /* allows line breaks */
      column-gap: $space-xs;
    }

    .price {
      flex: 1 1 100%;        /* forces own line */
      white-space: normal;
      line-height: 1.35;
      font-size: $font-sm;
    }

    /* micro-size tags & buttons */
    app-design-card .tag,
    .tag { font-size: $font-xs; padding: $space-xxs $space-xs; }

    app-design-card .btn-customize,
    .btn-customize { font-size: $font-xs; padding: $space-xs $space-sm; }
  }
}
