<div class="review-list">
    <div class="step-indicator">
        <span class="step active">1. Review</span>
        <span class="step">2. Summary</span>
        <span class="step">3. Complete</span>
    </div>

    <h1>Review Your Items</h1>

    @if (entries().length > 0) {
        <div class="review-grid">
            @for (entry of entries(); track entry.id) {
                <div class="review-card">
                    <div class="image-and-header">
                        <img
                                [src]="storageUrl(getImage(entry, designsList()))"
                                [alt]="getDesignName(entry, designsList())"
                                class="review-image-large"
                        />
                        <div class="header-info">
                            <h2>{{ getDesignName(entry, designsList()) }}</h2>
                            @if (getVariantName(entry, designsList()) !== '(default)') {
                                <p class="variant">
                                    <strong>Variant:</strong> {{ getVariantName(entry, designsList()) }}
                                </p>
                            }
                            <p class="quantity"><strong>Quantity:</strong> {{ entry.quantity }}</p>
                        </div>
                    </div>

                    <div class="field-list">
                        @for (field of getVisibleFields(entry); let index = $index; track trackByField(index, field)) {
                            <div class="field-entry">
                                <span class="field-label">{{ getLabel(entry, field.key) }}</span>
                                @if (isHexColor(getValue(entry, field.key))) {
                                    <span class="color-swatch" [style.background]="getValue(entry, field.key)"></span>
                                    <span>{{ getColorName(getValue(entry, field.key)) }}</span>
                                } @else if (isImageFile(getValue(entry, field.key))) {
                                    <img class="file-preview" [src]="getValue(entry, field.key)" alt="Field preview">
                                } @else {
                                    <span>{{ getValue(entry, field.key) || 'â€”' }}</span>
                                }
                            </div>
                        }
                    </div>

                    <div class="actions">
                        <button class="btn-tiffany-outline" (click)="edit(entry.id)">Edit</button>
                        <button class="btn-tiffany-danger" (click)="remove(entry.id)">Delete</button>
                    </div>
                </div>
            }
        </div>

        <div class="review-footer">
            <button class="btn-tiffany" [disabled]="!entries().length" (click)="goToSummary()">Continue to Summary</button>
        </div>
    } @else {
        <p class="empty-state">No entries yet. Please add some items first.</p>
    }
</div>