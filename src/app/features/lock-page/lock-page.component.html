<div class="lock-screen" (click)="onTap()">
    <button class="lock-btn" aria-label="Lock screen" (click)="$event.stopPropagation()">
        {{ isLocked() ? '🔒' : '🔐' }}
    </button>
    <input type="file" class="image-picker" (change)="onImageSelected($event)" (click)="$event.stopPropagation()" accept="image/*" />
    <a class="home-link" routerLink="/" (click)="$event.stopPropagation()" [attr.aria-disabled]="isLocked() ? 'true' : null" [class.disabled]="isLocked()">← Back to Home</a>

    @if (imageUrl()) {
        <img
            #previewImage
            [src]="imageUrl()"
            class="preview-image"
            [class.locked]="isLocked()"
            [draggable]="!isLocked()"
            (dragstart)="onDragStart($event)"
            (drag)="onDrag($event)"
            (touchstart)="onTouchStart($event)"
            (touchmove)="onTouchMove($event)"
            [style.transform]="getTransform()"
            alt="preview"/>
    }
</div>